#!/bin/bash
# Pre-commit hook: Fast checks before commit
# Runs: format check, analyze, unit tests

set -e

echo "ğŸ” Running pre-commit checks..."

# Check if Flutter is available
if ! command -v flutter &> /dev/null; then
    echo "âš ï¸  Flutter not found locally - skipping local checks"
    echo "   CI will run full validation on push"
    exit 0
fi

echo ""
echo "ğŸ“ Checking format..."
dart format --set-exit-if-changed lib/ test/

echo ""
echo "ğŸ” Running analyzer..."
flutter analyze --fatal-infos

echo ""
echo "ğŸ§ª Running unit tests..."
flutter test --coverage

echo ""
echo "âœ… Pre-commit checks passed!"
